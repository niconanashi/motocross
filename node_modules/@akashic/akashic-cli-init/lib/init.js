"use strict";
var InitParameterObject_1 = require("./InitParameterObject");
var BasicParameters_1 = require("./BasicParameters");
var downloadTemplate_1 = require("./downloadTemplate");
var extractZipIfNeeded_1 = require("./extractZipIfNeeded");
var copyTemplate = require("./copyTemplate");
var showTemplateMessage_1 = require("./showTemplateMessage");
var readTemplateFile_1 = require("./readTemplateFile");
function promiseInit(param) {
    var templateConfig;
    return Promise.resolve(undefined)
        .then(function () { return InitParameterObject_1.completeInitParameterObject(param); })
        .then(function () { return extractZipIfNeeded_1.extractZipIfNeeded(param); })
        .then(function () { return downloadTemplate_1.downloadTemplateIfNeeded(param); })
        .then(function () { return readTemplateFile_1.readTemplateFile(param); })
        .then(function (template) { templateConfig = template; })
        .then(function () { return copyTemplate.copyTemplate(templateConfig, param); })
        .then(function (confPath) { return BasicParameters_1.updateConfigurationFile(confPath, param.logger); })
        .then(function () { return showTemplateMessage_1.showTemplateMessage(templateConfig, param); })
        .then(function () { return param.logger.info("Done!"); });
}
exports.promiseInit = promiseInit;
function init(param, cb) {
    promiseInit(param).then(cb, cb);
}
exports.init = init;
//# sourceMappingURL=init.js.map