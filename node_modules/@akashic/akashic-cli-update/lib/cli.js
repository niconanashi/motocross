"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fs = require("fs");
var path = require("path");
var commander = require("commander");
var akashic_cli_commons_1 = require("@akashic/akashic-cli-commons");
var update_1 = require("./update");
var ver = JSON.parse(fs.readFileSync(path.resolve(__dirname, "..", "package.json"), "utf8")).version;
commander
    .usage("[options] <moduleName...>")
    .description("Update installed npm modules")
    .version(ver);
function cli(param) {
    var logger = new akashic_cli_commons_1.ConsoleLogger({ quiet: param.quiet });
    update_1.promiseUpdate({ cwd: param.cwd, moduleNames: param.args, logger: logger })
        .catch(function (err) {
        logger.error(err);
        process.exit(1);
    });
}
commander
    .option("-q, --quiet", "Suppress output");
function run(argv) {
    commander.parse(argv);
    cli(commander);
}
exports.run = run;
commander
    .on("--help", function () {
    console.log("  Update installed npm module");
    console.log("  If no moduleName is specified, update all modules");
});
